--- build_dir/target-aarch64_generic_musl/rtpengine-no-transcode/rtpengine-mr11.5.1.18/kernel-module/xt_RTPENGINE.c
+++ build_dir/target-aarch64_generic_musl/rtpengine-no-transcode/rtpengine-mr11.5.1.18/kernel-module/xt_RTPENGINE.c
@@ -1,4 +1,9 @@
 #include <net/route.h>  // 确保包含这个头文件

 // 旧代码
-// rt = ip_route_output(net, dst->u.ipv4, src->u.ipv4, tos, 0);
+// rt = ip_route_output(net, dst->u.ipv4, src->u.ipv4, tos, 0);

 // 新代码使用 ip_route_output_key 和 flowi4 结构体
+struct flowi4 fl4 = {
+    .daddr = dst->u.ipv4,
+    .saddr = src->u.ipv4,
+    .flowi4_tos = tos,
+    // 你可以设置更多的字段
+};
 rt = ip_route_output_key(net, &fl4);
